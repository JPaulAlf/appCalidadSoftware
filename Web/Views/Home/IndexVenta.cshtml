@model LNegocio.Factura

@{
    ViewBag.Title = "Venta Producto";
    Layout = "~/Views/Shared/_LayoutMaster.cshtml";

}

<div class="container-modulo-venta py-2">
    <!-- TABS DE LA APLICACION -->
    <div class="align-items-start container">

        <!-- MENU DE TABS -->
        <div class="col col-lg-2 nav nav-pills me-3" aria-orientation="vertical">

            <button class="nav-link active" data-bs-toggle="pill" href="#productos" type="button" role="tab" aria-selected="false" id="botonProducto">
                Carrito
            </button>

            <button class="nav-link" data-bs-toggle="pill" href="#formalizar" type="button" role="tab" aria-selected="false" id="botonPago">
                Pago
            </button>

        </div>

        <div class="tab-content">

            @using (Html.BeginForm("Guardar_Compra", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
            {

                <!-- TAB 1 -->
                <div class="col col-lg-12 tab-pane fade show active" id="productos" role="tabpanel">
                    <div class="container-info-tabs">
                        <H3 class="titulos">Productos seleccionados</H3>
                        <hr class="my-4">
                        <H4>Total de compra: <b class="text-total">₡8025</b></H4>
                        <br>
                        <div class="table-responsive">
                            <table class="table align-middle table-hover">
                                <thead>
                                    <tr>
                                        <th scope="col">#</th>
                                        <th class="text-center" scope="col">NOMBRE</th>
                                        <th class="text-center" scope="col">PRECIO</th>
                                        <th class="text-center" scope="col">CANTIDAD</th>
                                        <th class="text-center" scope="col">TOTAL</th>
                                        <th class="text-center" scope="col">AGREGAR</th>
                                        <th class="text-center" scope="col">ELIMINAR</th>
                                    </tr>
                                </thead>
                                <tbody id="productosCompra">

                                    @if ((List<LNegocio.Articulo>)ViewBag.listaArticulos == null)
                                    {
                                        <tr class="table-warning">
                                            <td colspan="7"><div class="text-center">La lista regreso como NULL</div> </td>
                                        </tr>
                                    }
                                    else
                                      if (((List<LNegocio.Articulo>)ViewBag.listaArticulos).Count() < 0)
                                    {
                                        <tr class="table-warning">
                                            <td colspan="7"><div class="text-center">(Count menor 0) Algo raro pasa</div> </td>
                                        </tr>
                                    }
                                    else
                                    if (((List<LNegocio.Articulo>)ViewBag.listaArticulos).Count() == 0)
                                    {
                                        <tr class="table-warning">
                                            <td colspan="7"><div class="text-center">(Count igual 0)No hay productos disponibles</div> </td>
                                        </tr>
                                    }
                                   
                                  
                                    else
                                    {
                                        foreach (var item in (List<LNegocio.Articulo>)ViewBag.listaArticulos)
                                        {
                                            @Html.HiddenFor(modelItem => item);
                                            @Html.HiddenFor(modelItem => item.ID);
                                            <tr>
                                                <th scope="row">1</th>
                                                <td class="text-center">
                                                    @Html.DisplayFor(modelItem => item.Nombre)
                                                </td>
                                                <td class="text-center">
                                                    ₡@Html.DisplayFor(modelItem => item.Costo)
                                                </td>
                                                <td class="text-center">
                                                    #@Html.DisplayFor(modelItem => item.Cantidad)
                                                </td>
                                                <td class="text-center">
                                                    ₡@Html.DisplayFor(modelItem => item.Cantidad)
                                                </td>
                                                <td class="text-center">
                                                    @Ajax.ActionLink("Agregar", "AgregarProducto", "Home",
                                                        new { id = item.ID },
                                                        new AjaxOptions
                                                             {
                                                            UpdateTargetId = "productosCompra",
                                                            InsertionMode = InsertionMode.Replace,
                                                        }, new { @class = "btn btn-success" })

                                                    @*<button type="button"
                                                        class="btn btn-success">
                                                    Agregar
                                                </button>*@

                                                </td>
                                                <td class="text-center">
                                                    @Ajax.ActionLink("Eliminar", "EliminarProducto", "Home",
                                                         new { id = item.ID },
                                                         new AjaxOptions
                                                              {
                                                             UpdateTargetId = "productosCompra",
                                                             InsertionMode = InsertionMode.Replace,
                                                         }, new { @class = "btn btn-danger" })

                                                    @*<button type="button"
                                                        class="btn btn-danger">
                                                    Eliminar
                                                </button>*@

                                                </td>
                                            </tr>
                                        }
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- TAB 2 -->
                <div class="col col-lg-12 tab-pane fade" id="formalizar" role="tabpanel">
                    <div class="container-info-tabs">
                        <H3 class="titulos">Detalle de la compra</H3>
                        <hr class="my-4">
                        <div class="contenido-tercer-tab">

                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <label for="nombreCliente">Nombre Cliente</label>
                                    @Html.EditorFor(model => model.Nombre, new { htmlAttributes = new { @class = "form-control", 
                                   type = "text", id = "nombreCliente", placeholder = "Nombre de cliente" } })
                                    @*input type="text" class="form-control" id="nombreCliente" placeholder="Nombre de cliente">*@
                                </div>
                            </div>
                            <br>
                            <div class="form-row">
                                <label>Favor seleccionar un metodo de pago:</label>
                                <div class="form-group col-md-6">
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="radio1"
                                               id="radio1" value="EFECTIVO" checked>
                                        <label class="form-check-label" for="radio1">EFECTIVO</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="radio1"
                                               id="radio2" value="TARJETA">
                                        <label class="form-check-label" for="radio2">TARJETA</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        @Html.EditorFor(model => model.Desc, new { htmlAttributes = new { @class = "form-control", 
                                       type = "number", id = "nombreCliente", placeholder = "Nombre de cliente" } })
                                        @* <input type="number" class="form-control" id="radio2Tarjeta"
                                            placeholder="Numero de tarjeta">*@
                                    </div>
                                </div>
                            </div>
                            <br>
                            <div class="form-row">
                                <label>Descuento:</label>
                                <div class="form-group col-md-6">
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="radio"
                                               id="radio3" value="option1" checked>
                                        <label class="form-check-label" for="radio3">NO</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="radio"
                                               id="radio4" value="option1">
                                        <label class="form-check-label" for="radio4">SI</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        @Html.EditorFor(model => model.Desc, new { htmlAttributes = new { @class = "form-control", 
                                       type = "number", id = "nombreCliente", placeholder = "Nombre de cliente" } })
                                        @* <input type="number" class="form-control" id="radio5Porcentaje"
                                            placeholder="Porcentaje de descuento">*@
                                    </div>
                                </div>
                            </div>
                            <br>
                            <br>
                            <h5>
                                Subtotal: <b class="text-subtotal">
                                    ₡8025
                                </b>
                            </h5>
                            <h5>
                                Descuento: <b class="text-descuento">
                                    -₡2000
                                </b>
                            </h5>
                            <h5>
                                Impuesto 13%: <b class="text-impuesto">
                                    ₡7025
                                </b>
                            </h5>
                            <h5>
                                Total: <b class="text-total">
                                    ₡6025
                                </b>
                            </h5>
                            <br>
                        </div>
                        <div class="col text-center">
                            <button type="submit" class="btn btn-warning boton-centrado">Finalizar compra</button>
                        </div>

                    </div>
                </div>

            }
        </div>
    </div>
</div>






@section Scripts {

    <script type="text/javascript">

        document.getElementById("botonProducto").addEventListener("click", mostrar);
        document.getElementById("botonPago").addEventListener("click", ocultar);
        document.getElementById("formalizar").style.display = "none"

        function cargaInicial(){
            document.getElementById("formalizar").style.display = "none"
        }

        function mostrar() {
            document.getElementById("productos").style.display = "unset"
            document.getElementById("formalizar").style.display = "none"
        }
        function ocultar() {
            document.getElementById("productos").style.display = "none"
            document.getElementById("formalizar").style.display = "unset"
        }

    </script>

}


